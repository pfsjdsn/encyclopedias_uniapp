{"version":3,"sources":["uni-app:///main.js","webpack:///E:/我的项目/uni-qiushi/uni_encyclopedias/pages/topic_detail/topic_detail.vue?93dd","webpack:///E:/我的项目/uni-qiushi/uni_encyclopedias/pages/topic_detail/topic_detail.vue?f9a4","webpack:///E:/我的项目/uni-qiushi/uni_encyclopedias/pages/topic_detail/topic_detail.vue?a010","webpack:///E:/我的项目/uni-qiushi/uni_encyclopedias/pages/topic_detail/topic_detail.vue?e5a2","uni-app:///pages/topic_detail/topic_detail.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iH;AACAA,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;;;AAG3D;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAiwB,CAAgB,sxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgCrxB;AACA;AACA,wBADA;AAEA,gCAFA;AAGA,0BAHA;AAIA,sBAJA,EADA;;AAOA,MAPA,kBAOA;AACA;AACA;AACA,sDADA;AAEA,wBAFA;AAGA,sBAHA;AAIA,sBAJA;AAKA,sBALA,EADA;;AAQA,iBARA;AASA;AACA,2BADA;AAEA,2BAFA,CATA;;AAaA;AACA,iEADA;AAEA,iEAFA,CAbA;;;;AAmBA,GA3BA;AA4BA;AACA,eA7BA,2BA6BA;AACA;AACA;AACA,GAhCA;AAiCA;AACA,mBAlCA,+BAkCA;AACA;AACA,GApCA;AAqCA,QArCA,kBAqCA,CArCA,EAqCA;AACA;AACA,GAvCA;AAwCA;AACA;AACA,UAFA,kBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA,KARA;AASA;AACA,WAVA,qBAUA;AACA,mBADA,mBACA,kBADA,mBACA,kCADA;AAEA,2DAFA,iHAEA,GAFA,6BAEA,GAFA;;AAIA,gDAJA;AAKA,iEALA;;AAOA,mBAPA,GAOA,EAPA;AAQA,oBARA,GAQA,kBARA;AASA;AACA;AACA;AACA;AACA,+DAbA;AAcA,gGAdA;;AAgBA,KA1BA;AA2BA;AACA,YA5BA,oBA4BA,IA5BA,EA4BA;AACA;AACA,4BADA;AAEA,kCAFA;AAGA,oCAHA;AAIA,yCAJA;AAKA,mBALA;AAMA,yBANA;AAOA,mBAPA,EAOA;AACA,+BARA;AASA,oBATA;AAUA,uBAVA;AAWA,2BAXA;AAYA;AACA,uEADA,EACA;AACA,kCAFA;AAGA,gCAHA,EAZA;;AAiBA,gCAjBA;AAkBA,sCAlBA;AAmBA,+BAnBA;;AAqBA,KAlDA;AAmDA,UAnDA,kBAmDA,KAnDA,EAmDA;AACA;AACA,KArDA;AAsDA,YAtDA,oBAsDA,KAtDA,EAsDA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA,KAhEA,EAxCA,E","file":"pages/topic_detail/topic_detail.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/topic_detail/topic_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./topic_detail.vue?vue&type=template&id=0cbe6da6&\"\nvar renderjs\nimport script from \"./topic_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./topic_detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/topic_detail/topic_detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic_detail.vue?vue&type=template&id=0cbe6da6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.3.0.5.20210107.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic_detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t<!-- 话题介绍 -->\r\n\t\t<topicInfo :item=\"topicInfo\"></topicInfo>\r\n\t\t<!-- tabbar切换 -->\r\n\t\t<swiperTabHead \r\n\t\t:tabBars=\"tabBars\"\r\n\t\t:tabIndex=\"tabIndex\"\r\n\t\t @tabtap=\"tabtap\"\r\n\t\t scrollStyle=\"border-bottom: 0;\" scrollItemStyle=\"width: 50%\">\r\n\t\t</swiperTabHead>\r\n\t\t<!-- 列表 -->\r\n\t\t<view class=\"topic_detail_list\">\r\n\t\t\t<block v-for=\"(item, index) in tabList\" :key=\"index\">\r\n\t\t\t\t<template v-if=\"tabIndex == index\">\r\n\t\t\t\t\t<!-- 列表 -->\r\n\t\t\t\t\t<block v-for=\"(list, listIndex) in item.list\" :key=\"listIndex\">\r\n\t\t\t\t\t\t<commonList :item=\"list\" :index=\"listIndex\"></commonList>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t<loadMore :loadText=\"item.loadText\"></loadMore>\r\n\t\t\t\t</template>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport commonList from '@/components/common/common_list.vue';\r\n\timport topicInfo from '@/components/topic/topic_info.vue';\r\n\timport swiperTabHead from '@/components/index/swiper_tab_header.vue';\r\n\timport loadMore from '@/components/common/load_more.vue';\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\ttopicInfo,\r\n\t\t\tswiperTabHead,\r\n\t\t\tcommonList,\r\n\t\t\tloadMore\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttopicInfo: {\r\n\t\t\t\t\ttitlePic: \"../../static/demo/topicpic/13.jpeg\",\r\n\t\t\t\t\ttitle: \"忆往事，敬余生\",\r\n\t\t\t\t\tdesc: \"我是描述内容\",\r\n\t\t\t\t\ttotalNum: 1000,\r\n\t\t\t\t\ttodayNum: 1000,\r\n\t\t\t\t},\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\ttabBars: [\r\n\t\t\t\t\t{name: '默认', id: 0},\r\n\t\t\t\t\t{name: '最新', id: 1}\r\n\t\t\t\t],\r\n\t\t\t\ttabList: [\r\n\t\t\t\t\t{loadText: '上拉加载更多',list: [], firstLoad: false, page: 1},\r\n\t\t\t\t\t{loadText: '上拉加载更多',list: [], firstLoad: false, page: 1}\r\n\t\t\t\t]\r\n\t\t\t\t\n\t\t\t}\n\t\t},\r\n\t\t// 触底事件\r\n\t\tonReachBottom() {\r\n\t\t\t// 上拉加载\r\n\t\t\tthis.loadMore()\r\n\t\t},\r\n\t\t// 下拉刷新 \r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tonLoad(e){\r\n\t\t\tthis.__init(JSON.parse(e.detail))\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t// 初始化数据\r\n\t\t\t__init(obj) {\r\n\t\t\t\tthis.topicInfo = obj\r\n\t\t\t\t// 修改标题\r\n\t\t\t\tuni.setNavigationBarTitle({title: obj.title})\r\n\t\t\t\t// 获取列表数据\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t// 下拉刷新 \r\n\t\t\tasync getList() {\r\n\t\t\t\tlet url = `topic/${this.topicInfo.id}/post/${this.tabList[this.tabIndex].page}`\r\n\t\t\t\tlet [err, res] = await this.$http.get(url, {}, {token:true});\r\n\t\t\t\t// 错误处理\r\n\t\t\t\tif(!this.$http.errorCheck(err, res)) {\r\n\t\t\t\t\treturn this.tabList[this.tabIndex].loadText = '上拉加载更多';\r\n\t\t\t\t}\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tlet list = res.data.data.list\r\n\t\t\t\tfor(let i = 0; i < list.length; i++) {\r\n\t\t\t\t\tarr.push(this.__format(list[i]))\r\n\t\t\t\t}\r\n\t\t\t\tthis.tabList[this.tabIndex].list = this.tabList[this.tabIndex].page > 1 ? this.tabList[this.tabIndex].list.concat(arr) : arr\r\n\t\t\t\tthis.tabList[this.tabIndex].firstLoad = true;\r\n\t\t\t\treturn this.tabList[this.tabIndex].loadText = (list.length < 10) ? '没有更多数据了'\t: '上拉加载更多';\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 转化格式\r\n\t\t\t__format(item) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tuserId: item.user.id,\r\n\t\t\t\t\tuserPic: item.user.userpic,\r\n\t\t\t\t\tuserName: item.user.username,\r\n\t\t\t\t\tisFollow: !!item.user.fens.length,\r\n\t\t\t\t\tid: item.id,\r\n\t\t\t\t\ttitle: item.title,\r\n\t\t\t\t\ttype: 'img', // img:图文， video视频\r\n\t\t\t\t\ttitlePic: item.titlepic,\r\n\t\t\t\t\tvideo: false,\r\n\t\t\t\t\tpath: item.path,\r\n\t\t\t\t\tshare: !!item.share,\r\n\t\t\t\t\tinfonum: {\r\n\t\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0, // 0：没有操作， 1顶， 2踩\r\n\t\t\t\t\t\tdingNum: item.ding_count,\r\n\t\t\t\t\t\tcaiNum: item.cai_count,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgoodNum: item.ding_count,\r\n\t\t\t\t\tcommentNum: item.comment_count,\r\n\t\t\t\t\tshareNum: item.shareNum,\r\n\t\t\t\t}\r\n\t\t\t},\n\t\t\ttabtap(index) {\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t},\r\n\t\t\tloadMore(index) {\r\n\t\t\t\tif (this.tabList[this.tabIndex].loadText != '上拉加载更多')return;\r\n\t\t\t\tthis.tabList[this.tabIndex].loadText = '加载中...'\r\n\t\t\t\t// 页数+1\r\n\t\t\t\tthis.tabList[this.tabIndex].page++;\r\n\t\t\t\t// 获取数据\r\n\t\t\t\tthis.getList();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n</style>\n"],"sourceRoot":""}