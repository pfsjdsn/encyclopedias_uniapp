(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/common/more_share"],{"40b7":function(e,n,t){"use strict";t.r(n);var o=t("9ff4"),r=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},"58e5":function(e,n,t){"use strict";var o=t("61b4"),r=t.n(o);r.a},"61b4":function(e,n,t){},"9ff4":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,n,t,o,r,a,i){try{var s=e[a](i),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(o,r)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var i=e.apply(n,t);function s(e){a(i,o,r,s,c,"next",e)}function c(e){a(i,o,r,s,c,"throw",e)}s(void 0)}))}}var s={props:{show:Boolean},data:function(){return{shareText:"uni-app可以同时发布成原生App、小程序、H5，邀请你一起体验！",href:"https://uniapp.dcloud.io",image:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png",shareType:1,providerList:[]}},onReady:function(){var n=this;e.getProvider({service:"share",success:function(e){for(var t=[],o=0;o<e.provider.length;o++)switch(console.log(e.provider[o],"dddddddddddd"),e.provider[o]){case"weixin":t.push({name:"微信好友",id:"weixin",zIcon:"iconweixin",zClass:"wx",sort:0}),t.push({name:"微信朋友圈",id:"weixin",zIcon:"iconpengyouquan",zClass:"pyq",type:"WXSenceTimeline",sort:1});break;case"sinaweibo":t.push({name:"新浪微博",id:"sinaweibo",zIcon:"iconxinlangweibo",zClass:"wb",sort:2});break;case"qq":t.push({name:"QQ好友",id:"qq",zIcon:"iconfenxiangqqhaoyou",zClass:"qq",sort:3});break;default:break}n.providerList=t.sort((function(e,n){return e.sort-n.sort})),console.log(n.providerList,11111111111)},fail:function(n){console.log("获取分享通道失败",n),e.showModal({content:"获取分享通道失败",showCancel:!1})}})},methods:{toggle:function(){this.$emit("toggle")},share:function(n){var t=this;return i(o.default.mark((function r(){var a;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(console.log("分享通道:"+n.id+"； 分享类型:"+t.shareType),t.shareText||1!==t.shareType&&0!==t.shareType){o.next=4;break}return e.showModal({content:"分享内容不能为空",showCancel:!1}),o.abrupt("return");case 4:if(t.image||2!==t.shareType&&0!==t.shareType){o.next=7;break}return e.showModal({content:"分享图片不能为空",showCancel:!1}),o.abrupt("return");case 7:a={provider:n.id,scene:n.type&&"WXSenceTimeline"===n.type?"WXSenceTimeline":"WXSceneSession",type:t.shareType,success:function(n){console.log("success",n),e.showModal({content:"已分享",showCancel:!1})},fail:function(n){console.log("fail",n),e.showModal({content:n.errMsg,showCancel:!1})},complete:function(){console.log("分享操作结束!")}},o.t0=t.shareType,o.next=0===o.t0?11:1===o.t0?16:2===o.t0?18:5===o.t0?20:24;break;case 11:return a.summary=t.shareText,a.imageUrl=t.image,a.title="欢迎体验uniapp",a.href="https://uniapp.dcloud.io",o.abrupt("break",25);case 16:return a.summary=t.shareText,o.abrupt("break",25);case 18:return a.imageUrl=t.image,o.abrupt("break",25);case 20:return a.imageUrl=t.image?t.image:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/app/share-logo@3.png",a.title="欢迎体验uniapp",a.miniProgram={id:"gh_33446d7f7a26",path:"/pages/tabBar/component/component",webUrl:"https://uniapp.dcloud.io",type:0},o.abrupt("break",25);case 24:return o.abrupt("break",25);case 25:if(0!==a.type||"iOS"!==plus.os.name){o.next=29;break}return o.next=28,t.compress();case 28:a.imageUrl=o.sent;case 29:1===a.type&&"qq"===a.provider&&(a.href="https://uniapp.dcloud.io",a.title="欢迎体验uniapp"),e.share(a);case 31:case"end":return o.stop()}}),r)})))()},compress:function(){console.log("开始压缩");var n=this.image;return new Promise((function(t){var o=plus.io.convertAbsoluteFileSystem(n.replace("file://",""));console.log("after"+o),plus.io.resolveLocalFileSystemURL(o,(function(o){o.file((function(o){console.log("getFile:"+JSON.stringify(o)),o.size>20480&&plus.zip.compressImage({src:n,dst:n.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG"),width:"10%",height:"10%",quality:1,overwrite:!0},(function(e){console.log("success zip****"+e.size);var o=n.replace(".jpg","2222.jpg").replace(".JPG","2222.JPG");t(o)}),(function(n){e.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}),(function(n){console.log("Resolve file URL failed: "+n.message),e.showModal({content:"分享图片太大,需要请重新选择图片!",showCancel:!1})}))}))}}};n.default=s}).call(this,t("543d")["default"])},b40b:function(e,n,t){"use strict";t.r(n);var o=t("c071"),r=t("40b7");for(var a in r)"default"!==a&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("58e5");var i,s=t("f0c5"),c=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,"6fdc23b4",null,!1,o["a"],i);n["default"]=c.exports},c071:function(e,n,t){"use strict";var o;t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return o}));var r=function(){var e=this,n=e.$createElement;e._self._c},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/common/more_share-create-component',
    {
        'components/common/more_share-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("b40b"))
        })
    },
    [['components/common/more_share-create-component']]
]);
